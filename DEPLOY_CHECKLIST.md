# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è –Ω–∞ VPS

## –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–≤–µ—Ä—å:

- [ ] VPS –¥–æ—Å—Ç—É–ø–µ–Ω: `ssh root@151.247.209.203`
- [ ] Git —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `git --version`
- [ ] Python 3.8+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `python3 --version`

---

## –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ

```bash
cd /var/www
git clone https://github.com/ainerovich/avito-parser.git
cd avito-parser
chmod +x *.sh
```

- [ ] –†–µ–ø–æ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–æ
- [ ] –°–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ

---

## –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd backend
pip3 install -r requirements.txt
cd ..
```

- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

---

## –®–∞–≥ 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞

```bash
cd backend
cp config.yaml.example config.yaml  # –ï—Å–ª–∏ –±—É–¥–µ—Ç —Ñ–∞–π–ª-–ø—Ä–∏–º–µ—Ä
nano config.yaml  # –†–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥
```

**–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ:**
- [ ] `city: "vorkuta"` (–∏–ª–∏ —Ç–≤–æ–π –≥–æ—Ä–æ–¥)
- [ ] `vk.access_token` - –≤–≤–µ–¥–∏ VK —Ç–æ–∫–µ–Ω
- [ ] `vk.groups` - –≤–≤–µ–¥–∏ ID –≥—Ä—É–ø–ø
- [ ] `telegram.bot_token` - –≤–≤–µ–¥–∏ TG —Ç–æ–∫–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- [ ] `telegram.channels` - –≤–≤–µ–¥–∏ ID –∫–∞–Ω–∞–ª–æ–≤ TG

---

## –®–∞–≥ 4: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î

```bash
python3 -c "from database import db; db.init_db()"
```

- [ ] –ë–î —Å–æ–∑–¥–∞–Ω–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ü–∞–ø–∫–∞ `data/` —Å–æ–∑–¥–∞–Ω–∞

---

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ Dashboard

```bash
bash start-dashboard.sh
```

–í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π: `http://localhost:5000`

- [ ] Dashboard –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- [ ] –í–∏–¥–∏—à—å –ø–æ–ª—è –¥–ª—è –≤–≤–æ–¥–∞ –∫–æ–Ω—Ñ–∏–≥–∞

---

## –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ Dashboard

1. –í–≤–µ–¥–∏ –≥–æ—Ä–æ–¥ ‚Üí –∂–º–∏ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏"
2. –ü–µ—Ä–µ–∫–ª—é—á–∞–π –Ω—É–∂–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
3. –í–≤–µ–¥–∏ VK —Ç–æ–∫–µ–Ω –∏ ID –≥—Ä—É–ø–ø
4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –í–≤–µ–¥–∏ TG –±–æ—Ç —Ç–æ–∫–µ–Ω –∏ –∫–∞–Ω–∞–ª—ã
5. –í–≤–µ–¥–∏ –ø—Ä–æ–∫—Å–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã
6. –í–≤–µ–¥–∏ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞

- [ ] –ì–æ—Ä–æ–¥ –≤—ã–±—Ä–∞–Ω
- [ ] –°—Å—ã–ª–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [ ] VK —Ç–æ–∫–µ–Ω –≤–≤–µ–¥—ë–Ω
- [ ] VK –≥—Ä—É–ø–ø—ã —É–∫–∞–∑–∞–Ω—ã
- [ ] TG –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)

---

## –®–∞–≥ 7: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞

```bash
# –í –ù–û–í–û–ú —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
bash start-parser.sh
```

–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:
```
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
üîÑ –ó–∞–ø—É—Å–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 300 —Å–µ–∫—É–Ω–¥
```

- [ ] –ü–∞—Ä—Å–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [ ] –í–∏–¥–∏—à—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## –®–∞–≥ 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
tail -f logs/parser.log
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ —Ç–∏–ø–∞:
```
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
üîç –ü–∞—Ä—Å–∏–Ω–≥: https://www.avito.ru/vorkuta/avtomobili
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: {'new': 5, 'duplicate': 2, 'updated': 0}
```

- [ ] –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞
- [ ] –ù–∞—Ö–æ–¥—è—Ç—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è

---

## –®–∞–≥ 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π —Å–≤–æ—é VK –≥—Ä—É–ø–ø—É
2. –ü—Ä–æ–≤–µ—Ä—å –ø–æ—è–≤–∏–ª–∏—Å—å –ª–∏ –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã
3. –û—Ç–∫—Ä–æ–π Telegram –∫–∞–Ω–∞–ª (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª)
4. –ü—Ä–æ–≤–µ—Ä—å –ø–æ—è–≤–∏–ª–∏—Å—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

- [ ] –í VK –≥—Ä—É–ø–ø–µ –ø–æ—è–≤–∏–ª–∏—Å—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- [ ] –í Telegram –∫–∞–Ω–∞–ª–µ –ø–æ—è–≤–∏–ª–∏—Å—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- [ ] –§–æ—Ä–º–∞—Ç –ø–æ—Å—Ç–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

---

## –®–∞–≥ 10: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–µ—Ä–µ–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```bash
# –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ - –∂–º–∏ Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö
# –ü–æ—Ç–æ–º –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥ –∏ –∑–∞–ø—É—Å—Ç–∏ –∑–∞–Ω–æ–≤–æ
```

- [ ] –ü–∞—Ä—Å–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ö–æ–Ω—Ñ–∏–≥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- [ ] –ü–∞—Ä—Å–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

---

## –®–∞–≥ 11: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π systemd service:

```bash
sudo nano /etc/systemd/system/avito-parser.service
```

–í—Å—Ç–∞–≤—å:

```ini
[Unit]
Description=Avito Parser
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/var/www/avito-parser
ExecStart=/bin/bash /var/www/avito-parser/start-parser.sh
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

–í–∫–ª—é—á–∏:

```bash
sudo systemctl enable avito-parser
sudo systemctl start avito-parser
sudo systemctl status avito-parser
```

- [ ] Service —Å–æ–∑–¥–∞–Ω
- [ ] Service –≤–∫–ª—é—á–µ–Ω
- [ ] Service —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] Dashboard —Ä–∞–±–æ—Ç–∞–µ—Ç (http://localhost:5000)
- [ ] –ü–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç (ps aux | grep main.py)
- [ ] –û–±—ä—è–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ VK
- [ ] –û–±—ä—è–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ Telegram
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] –ë–î —Ä–∞—Å—Ç—ë—Ç (–Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è)

---

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–∞—Ä—Å–µ—Ä –ø–∞–¥–∞–µ—Ç:
```bash
tail -100 logs/parser.log | grep ERROR
```

### –ù–µ –ø—É–±–ª–∏–∫—É–µ—Ç –≤ VK:
- –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω: `grep access_token backend/config.yaml`
- –ü—Ä–æ–≤–µ—Ä—å ID –≥—Ä—É–ø–ø: `grep -A 3 "groups:" backend/config.yaml`
- –£–±–µ–¥–∏—Å—å —Ç—ã –∞–¥–º–∏–Ω –≥—Ä—É–ø–ø—ã

### –ù–µ –ø—É–±–ª–∏–∫—É–µ—Ç –≤ TG:
- –ü—Ä–æ–≤–µ—Ä—å —Ç–æ–∫–µ–Ω: `grep bot_token backend/config.yaml`
- –ü—Ä–æ–≤–µ—Ä—å ID –∫–∞–Ω–∞–ª–∞: `grep -A 3 "channels:" backend/config.yaml`
- –£–±–µ–¥–∏—Å—å –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∞–¥–º–∏–Ω—ã –∫–∞–Ω–∞–ª–∞

### –ù–µ –Ω–∞—Ö–æ–¥–∏—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è:
- –ü—Ä–æ–≤–µ—Ä—å —Å—Å—ã–ª–∫–∏: `grep "url:" backend/config.yaml`
- –ü—Ä–æ–≤–µ—Ä—å –≥–æ—Ä–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–≤–µ–¥—ë–Ω
- –ú–æ–∂–µ—Ç –Ω—É–∂–Ω—ã –ø—Ä–æ–∫—Å–∏ (–ê–≤–∏—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –±–µ–∑ –Ω–∏—Ö)

---

## ‚úÖ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ø–∞—Ä—Å–∏—Ç –Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- –ü—É–±–ª–∏–∫—É–µ—Ç –≤ VK –≥—Ä—É–ø–ø—ã
- –ü—É–±–ª–∏–∫—É–µ—Ç –≤ Telegram –∫–∞–Ω–∞–ª—ã
- –ò–∑–±–µ–≥–∞–µ—Ç –¥—É–±–ª–µ–π
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ä–µ–∫–ª–∞–º—É

**–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –°–∏—Å—Ç–µ–º–∞ –≤ –±–æ–µ–≤–æ–º —Ä–µ–∂–∏–º–µ! üöÄ**
